"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var isInteger = require("core-js/library/fn/number/is-integer");
var Predictor = (function () {
    function Predictor() {
        this.size = 0;
    }
    Predictor.prototype.writeUInt = function (value, length) {
        this.size += length;
    };
    Predictor.prototype.writeVarUInt = function (value) {
        if (Buffer.isBuffer(value)) {
            this.writeVarOctetString(value);
            return;
        }
        else if (!isInteger(value)) {
            throw new Error('UInt must be an integer');
        }
        else if (value < 0) {
            throw new Error('UInt must be positive');
        }
        var length = Math.ceil(value.toString(2).length / 8);
        this.skipVarOctetString(length);
    };
    Predictor.prototype.writeOctetString = function (buffer, length) {
        this.skip(length);
    };
    Predictor.prototype.writeVarOctetString = function (buffer) {
        this.skipVarOctetString(buffer.length);
    };
    Predictor.prototype.write = function (bytes) {
        this.size += bytes.length;
    };
    Predictor.prototype.skip = function (bytes) {
        this.size += bytes;
    };
    Predictor.prototype.getSize = function () {
        return this.size;
    };
    Predictor.prototype.skipVarOctetString = function (length) {
        this.skip(1);
        if (length > 127) {
            var lengthOfLength = Math.ceil(length.toString(2).length / 8);
            this.skip(lengthOfLength);
        }
        this.skip(length);
    };
    return Predictor;
}());
;
[1, 2, 4, 8].forEach(function (bytes) {
    Predictor.prototype['writeUInt' + bytes * 8] = function (value) {
        return this.writeUInt(value, bytes);
    };
});
exports.default = Predictor;
//# sourceMappingURL=predictor.js.map